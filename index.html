<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Access Verification</title>

    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: Arial;
        background: #f4f6f8;
      }
      .box {
        background: white;
        padding: 25px;
        border-radius: 12px;
        width: 90%;
        max-width: 350px;
        text-align: center;
      }
      input,
      button {
        width: 100%;
        padding: 12px;
        margin-top: 15px;
      }
      button {
        background: #3b82f6;
        color: white;
        border: none;
        border-radius: 8px;
      }
      .error {
        color: red;
        margin-top: 10px;
      }
    </style>
  </head>

  <body>
    <div class="box">
      <h2>üì± Enter Phone Number</h2>
      <input id="phone" type="tel" placeholder="10-digit number" />
      <button onclick="checkAccess()">Continue</button>
      <div id="error" class="error"></div>
    </div>

    <script>
      let allowedPhones = [];

      fetch("allowed-phones.json")
        .then((res) => res.json())
        .then((data) => (allowedPhones = data.allowed))
        .catch(() => {
          document.getElementById("error").textContent =
            "Unable to load access list";
        });

      function checkAccess() {
        const phone = document.getElementById("phone").value.trim();
        const error = document.getElementById("error");

        if (!allowedPhones.length) {
          error.textContent = "Access list not loaded";
          return;
        }

        if (allowedPhones.includes(phone)) {
          sessionStorage.setItem("authorized", "yes");
          window.location.href = "gallery.html";
        } else {
          error.textContent = "‚ùå Phone number not registered, Please contact admin or call 9845607565.";
        }
      }
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>Nidhish & Sthuthi</title>

    <style>
      /* ===== BACKGROUND ===== */
      .bg {
        position: fixed;
        inset: 0;
        background-size: cover;
        background-position: center;
        filter: blur(18px) brightness(0.6);
        z-index: -1;
        transition: background-image 1.2s ease-in-out;
      }

      body {
        margin: 0;
        font-family: Arial, sans-serif;
      }

      header {
        background: linear-gradient(135deg, #4f46e5, #3b82f6);
        color: white;
        padding: 15px;
        text-align: center;
        font-size: 22px;
      }

      .tabs {
        display: flex;
        justify-content: center;
        margin: 15px;
      }

      .tab {
        padding: 10px 25px;
        margin: 0 10px;
        border-radius: 25px;
        background: rgba(229, 231, 235, 0.9);
        cursor: pointer;
        font-weight: bold;
      }

      .tab.active {
        background: #3b82f6;
        color: white;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 15px;
        padding: 15px;
      }

      /* IMAGES */
      .grid img {
        width: 100%;
        height: 160px;
        object-fit: cover;
        border-radius: 12px;
        cursor: pointer;
        -webkit-touch-callout: none;
        user-select: none;
      }

      /* VIDEOS */
      .grid video {
        width: 200%;
        height: 260px;
        object-fit: contain;
        border-radius: 12px;
        background: black;
      }

      .hidden {
        display: none;
      }

      /* ===== FULLSCREEN IMAGE ===== */
      .overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.95);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
      }

      .overlay img {
        max-width: 90%;
        max-height: 90%;
        transition: transform 0.3s ease;
        touch-action: pinch-zoom;
        user-select: none;
        -webkit-user-drag: none;
      }

      .close {
        position: fixed;
        top: 15px;
        right: 20px;
        font-size: 35px;
        color: white;
        cursor: pointer;
        z-index: 1002;
      }

      .nav {
        position: fixed;
        top: 50%;
        transform: translateY(-50%);
        font-size: 36px;
        color: white;
        cursor: pointer;
        z-index: 1002;
        padding: 14px;
        background: rgba(0, 0, 0, 0.45);
        border-radius: 50%;
        user-select: none;
      }

      .nav.left {
        left: 10px;
      }
      .nav.right {
        right: 10px;
      }

      /* MOBILE */
      @media (max-width: 600px) {
        .grid img {
          height: 130px;
        }
        .grid video {
          height: 220px;
          width: 200%;
        }
        .nav {
          font-size: 26px;
          padding: 12px;
        }
      }
    </style>
  </head>

  <body>
    <div class="bg" id="bg"></div>

    <header>Nidhish & Sthuthi Engagement ‚Ä¢ 10-11-2025</header>

    <div class="tabs">
      <div class="tab active" onclick="showTab('images')">Images</div>
      <div class="tab" onclick="showTab('videos')">Videos</div>
    </div>

    <div id="images" class="grid"></div>
    <div id="videos" class="grid hidden"></div>

    <!-- IMAGE OVERLAY -->
    <div class="overlay" id="imageOverlay">
      <span class="close" onclick="closeOverlay()">‚úï</span>
      <span class="nav left" onclick="navigate(-1)">‚ùÆ</span>
      <img id="overlayImg" />
      <span class="nav right" onclick="navigate(1)">‚ùØ</span>
    </div>

    <script>
      /* ===== SECURITY ===== */
      if (sessionStorage.getItem("authorized") !== "yes") {
        document.body.innerHTML =
          "<h2 style='text-align:center;margin-top:50px;'>‚ùå Access Denied</h2>";
      }

      let images = [];
      let currentIndex = 0;
      let bgIndex = 0;
      let rotation = 0;

      const bg = document.getElementById("bg");
      const overlayImg = document.getElementById("overlayImg");

      fetch("media.json")
        .then((res) => res.json())
        .then((data) => {
          images = data.images;

          const imgContainer = document.getElementById("images");
          const vidContainer = document.getElementById("videos");

          data.images.forEach((img, index) => {
            const el = document.createElement("img");
            el.src = `photos/${img}`;
            el.onclick = () => openImage(index);
            imgContainer.appendChild(el);
          });

          data.videos.forEach((video) => {
            const v = document.createElement("video");
            v.src = `videos/${video}`;
            v.controls = true;
            v.controlsList = "nodownload";
            v.playsInline = true;
            vidContainer.appendChild(v);
          });

          if (images.length) {
            bg.style.backgroundImage = `url(photos/${images[0]})`;
          }

          setInterval(() => {
            bgIndex = (bgIndex + 1) % images.length;
            bg.style.backgroundImage = `url(photos/${images[bgIndex]})`;
          }, 5000);
        });

      function showTab(tab) {
        document
          .querySelectorAll(".tab")
          .forEach((t) => t.classList.remove("active"));
        imagesDiv = document.getElementById("images");
        videosDiv = document.getElementById("videos");
        imagesDiv.classList.add("hidden");
        videosDiv.classList.add("hidden");

        if (tab === "images") {
          imagesDiv.classList.remove("hidden");
          document.querySelectorAll(".tab")[0].classList.add("active");
        } else {
          videosDiv.classList.remove("hidden");
          document.querySelectorAll(".tab")[1].classList.add("active");
        }
      }

      function openImage(index) {
        currentIndex = index;
        rotation = 0;
        overlayImg.src = `photos/${images[index]}`;
        overlayImg.style.transform = "rotate(0deg)";
        document.getElementById("imageOverlay").style.display = "flex";
      }

      function closeOverlay() {
        document.getElementById("imageOverlay").style.display = "none";
      }

      function navigate(dir) {
        currentIndex = (currentIndex + dir + images.length) % images.length;
        rotation = 0;
        overlayImg.src = `photos/${images[currentIndex]}`;
        overlayImg.style.transform = "rotate(0deg)";
      }

      /* üîÑ ROTATE ON TAP */
      overlayImg.addEventListener("click", (e) => {
        e.stopPropagation();
        rotation = (rotation + 90) % 360;
        overlayImg.style.transform = `rotate(${rotation}deg)`;
      });

      /* üö´ DISABLE RIGHT CLICK */
      document.addEventListener("contextmenu", (e) => e.preventDefault());

      /* TAP OUTSIDE CLOSE */
      document.getElementById("imageOverlay").addEventListener("click", (e) => {
        if (e.target.id === "imageOverlay") closeOverlay();
      });
    </script>
  </body>
</html>
